
class ProgressTracker {
  constructor(options) {
    console.log(options);
    this.options = options;

    this.currentProgress = 0;

    this.percentageRatio = 100 / this.options.dailyGoal;

    this.percentage = document.querySelector(
      `.${this.options.domRefs.percentage}`
    );
    this.timeStampHolder = document.querySelector(
      `.${this.options.domRefs.timeStampHolder}`
    );
    this.addButton = document.querySelector(
      `.${this.options.domRefs.addButton}`
    );
    this.currentGoalHolders = document.querySelectorAll(
      `.${this.options.domRefs.currentGoal}`
    );
    this.currentUnitHolders = document.querySelectorAll(
      `.${this.options.domRefs.currentUnits}`
    );

    this.showUserOptions();

    // units: "ml",
    // dailyGoal: 2000,
    // mode: "local",
    // domRefs: {
    //   percentage: "js-amount",
    //   timeStampHolder: "js-timestamps",
    //   addButton: "js-log",
    //   currentGoal: "js-goal",
    //   currentUnits: "js-units"
    // },
    // afterUpdate: function(newPercentage) {
    //   console.log("It has been updated!");
    // }
  }

  showUserOptions() {
    for (const g of this.currentGoalHolders) {
      g.innerHTML = this.options.dailyGoal;
    }

    for (const u of this.currentUnitHolders) {
      u.innerHTML = this.options.units;
    }
  }
}

const uiBinding = (function() {
  //subModules
  const wave = (function() {
    const setup = function() {
      console.log("setup");
    };
    const updateWaveHeight = function() {
      console.log("updateWaveHeight");
    };

    return {
      setup: setup,
      updateWaveHeight: updateWaveHeight
    };
  })();

  const logging = (function() {
    const setup = function() {
      console.log("setup");
    };

    const enableAmountOptions = function() {
      console.log("enableAmountOptions");
    };

    return {
      setup: setup,
      enableAmountOptions: enableAmountOptions
    };
  })();

  return {
    wave: wave,
    logging: logging
  };
})();

(function() {
  console.log("ðŸ’§", "https://www.youtube.com/watch?v=ARC1w1WWxGY");

  const options = {
    units: "ml",
    dailyGoal: 1600,
    mode: "local",
    domRefs: {
      percentage: "js-amount",
      timeStampHolder: "js-timestamps",
      addButton: "js-log",
      currentGoal: "js-goal",
      currentUnits: "js-units"
    },
    afterUpdate: function(newPercentage) {
      console.log("It has been updated!");
    }
  };

  document.addEventListener("DOMContentLoaded", () => {
    new ProgressTracker(options);
  });
})();
